{
  "feedback": {
    "status": "fail",
    "reason": "Query cost (234088) exceeds limit (1000). High-cost sort operation on lineitem - index can eliminate sorting",
    "suggestion": "CREATE INDEX idx_lineitem_l_comment ON lineitem(l_comment);",
    "priority": "HIGH"
  },
  "technical_analysis": {
    "total_cost": 234087.73,
    "execution_time_ms": 542.055,
    "planning_time_ms": 1.592,
    "bottlenecks": [
      {
        "node_type": "Sort",
        "severity": "HIGH",
        "reason": "High-cost sort operation on lineitem - index can eliminate sorting",
        "suggestion": "CREATE INDEX idx_lineitem_l_comment ON lineitem(l_comment);",
        "cost": 239327.32,
        "table": "lineitem",
        "rows": null,
        "cost_percentage": null
      },
      {
        "node_type": "Seq Scan",
        "severity": "HIGH",
        "reason": "Sequential scan on lineitem with 2,000,405 rows",
        "suggestion": "CREATE INDEX idx_lineitem_id ON lineitem(id);",
        "cost": 137508.15,
        "table": "lineitem",
        "rows": 2000405,
        "cost_percentage": null
      },
      {
        "node_type": "Sort",
        "severity": "MEDIUM",
        "reason": "Node accounts for 102.2% of total query cost",
        "suggestion": "Review this operation - it dominates query execution time",
        "cost": 239327.32,
        "table": null,
        "rows": null,
        "cost_percentage": 102.23830185375371
      },
      {
        "node_type": "Limit",
        "severity": "MEDIUM",
        "reason": "Node accounts for 100.0% of total query cost",
        "suggestion": "Review this operation - it dominates query execution time",
        "cost": 234087.73,
        "table": null,
        "rows": null,
        "cost_percentage": 100.0
      }
    ],
    "summary": "Found 4 bottleneck(s): 2 HIGH severity issue(s), 2 MEDIUM severity issue(s). Total cost: 234087.73",
    "optimization_priority": "HIGH"
  },
  "explain_plan_dry": [
    {
      "Plan": {
        "Node Type": "Limit",
        "Parallel Aware": false,
        "Async Capable": false,
        "Startup Cost": 234076.06,
        "Total Cost": 234087.73,
        "Plan Rows": 100,
        "Plan Width": 117,
        "Output": [
          "l_orderkey",
          "l_partkey",
          "l_suppkey",
          "l_linenumber",
          "l_quantity",
          "l_extendedprice",
          "l_discount",
          "l_tax",
          "l_returnflag",
          "l_linestatus",
          "l_shipdate",
          "l_commitdate",
          "l_receiptdate",
          "l_shipinstruct",
          "l_shipmode",
          "l_comment"
        ],
        "Shared Hit Blocks": 0,
        "Shared Read Blocks": 0,
        "Shared Dirtied Blocks": 0,
        "Shared Written Blocks": 0,
        "Local Hit Blocks": 0,
        "Local Read Blocks": 0,
        "Local Dirtied Blocks": 0,
        "Local Written Blocks": 0,
        "Temp Read Blocks": 0,
        "Temp Written Blocks": 0,
        "Plans": [
          {
            "Node Type": "Gather Merge",
            "Parent Relationship": "Outer",
            "Parallel Aware": false,
            "Async Capable": false,
            "Startup Cost": 234076.06,
            "Total Cost": 817570.3,
            "Plan Rows": 5001030,
            "Plan Width": 117,
            "Output": [
              "l_orderkey",
              "l_partkey",
              "l_suppkey",
              "l_linenumber",
              "l_quantity",
              "l_extendedprice",
              "l_discount",
              "l_tax",
              "l_returnflag",
              "l_linestatus",
              "l_shipdate",
              "l_commitdate",
              "l_receiptdate",
              "l_shipinstruct",
              "l_shipmode",
              "l_comment"
            ],
            "Workers Planned": 2,
            "Shared Hit Blocks": 0,
            "Shared Read Blocks": 0,
            "Shared Dirtied Blocks": 0,
            "Shared Written Blocks": 0,
            "Local Hit Blocks": 0,
            "Local Read Blocks": 0,
            "Local Dirtied Blocks": 0,
            "Local Written Blocks": 0,
            "Temp Read Blocks": 0,
            "Temp Written Blocks": 0,
            "Plans": [
              {
                "Node Type": "Sort",
                "Parent Relationship": "Outer",
                "Parallel Aware": false,
                "Async Capable": false,
                "Startup Cost": 233076.04,
                "Total Cost": 239327.32,
                "Plan Rows": 2500515,
                "Plan Width": 117,
                "Output": [
                  "l_orderkey",
                  "l_partkey",
                  "l_suppkey",
                  "l_linenumber",
                  "l_quantity",
                  "l_extendedprice",
                  "l_discount",
                  "l_tax",
                  "l_returnflag",
                  "l_linestatus",
                  "l_shipdate",
                  "l_commitdate",
                  "l_receiptdate",
                  "l_shipinstruct",
                  "l_shipmode",
                  "l_comment"
                ],
                "Sort Key": [
                  "lineitem.l_comment"
                ],
                "Shared Hit Blocks": 0,
                "Shared Read Blocks": 0,
                "Shared Dirtied Blocks": 0,
                "Shared Written Blocks": 0,
                "Local Hit Blocks": 0,
                "Local Read Blocks": 0,
                "Local Dirtied Blocks": 0,
                "Local Written Blocks": 0,
                "Temp Read Blocks": 0,
                "Temp Written Blocks": 0,
                "Plans": [
                  {
                    "Node Type": "Seq Scan",
                    "Parent Relationship": "Outer",
                    "Parallel Aware": true,
                    "Async Capable": false,
                    "Relation Name": "lineitem",
                    "Schema": "public",
                    "Alias": "lineitem",
                    "Startup Cost": 0.0,
                    "Total Cost": 137508.15,
                    "Plan Rows": 2500515,
                    "Plan Width": 117,
                    "Output": [
                      "l_orderkey",
                      "l_partkey",
                      "l_suppkey",
                      "l_linenumber",
                      "l_quantity",
                      "l_extendedprice",
                      "l_discount",
                      "l_tax",
                      "l_returnflag",
                      "l_linestatus",
                      "l_shipdate",
                      "l_commitdate",
                      "l_receiptdate",
                      "l_shipinstruct",
                      "l_shipmode",
                      "l_comment"
                    ],
                    "Shared Hit Blocks": 0,
                    "Shared Read Blocks": 0,
                    "Shared Dirtied Blocks": 0,
                    "Shared Written Blocks": 0,
                    "Local Hit Blocks": 0,
                    "Local Read Blocks": 0,
                    "Local Dirtied Blocks": 0,
                    "Local Written Blocks": 0,
                    "Temp Read Blocks": 0,
                    "Temp Written Blocks": 0
                  }
                ]
              }
            ]
          }
        ]
      },
      "Planning": {
        "Shared Hit Blocks": 79,
        "Shared Read Blocks": 0,
        "Shared Dirtied Blocks": 0,
        "Shared Written Blocks": 0,
        "Local Hit Blocks": 0,
        "Local Read Blocks": 0,
        "Local Dirtied Blocks": 0,
        "Local Written Blocks": 0,
        "Temp Read Blocks": 0,
        "Temp Written Blocks": 0
      }
    }
  ],
  "explain_plan_analyze": [
    {
      "Plan": {
        "Node Type": "Limit",
        "Parallel Aware": false,
        "Async Capable": false,
        "Startup Cost": 234076.06,
        "Total Cost": 234087.73,
        "Plan Rows": 100,
        "Plan Width": 117,
        "Actual Startup Time": 539.843,
        "Actual Total Time": 541.881,
        "Actual Rows": 100,
        "Actual Loops": 1,
        "Output": [
          "l_orderkey",
          "l_partkey",
          "l_suppkey",
          "l_linenumber",
          "l_quantity",
          "l_extendedprice",
          "l_discount",
          "l_tax",
          "l_returnflag",
          "l_linestatus",
          "l_shipdate",
          "l_commitdate",
          "l_receiptdate",
          "l_shipinstruct",
          "l_shipmode",
          "l_comment"
        ],
        "Shared Hit Blocks": 1938,
        "Shared Read Blocks": 110679,
        "Shared Dirtied Blocks": 0,
        "Shared Written Blocks": 0,
        "Local Hit Blocks": 0,
        "Local Read Blocks": 0,
        "Local Dirtied Blocks": 0,
        "Local Written Blocks": 0,
        "Temp Read Blocks": 0,
        "Temp Written Blocks": 0,
        "Plans": [
          {
            "Node Type": "Gather Merge",
            "Parent Relationship": "Outer",
            "Parallel Aware": false,
            "Async Capable": false,
            "Startup Cost": 234076.06,
            "Total Cost": 817570.3,
            "Plan Rows": 5001030,
            "Plan Width": 117,
            "Actual Startup Time": 539.841,
            "Actual Total Time": 541.872,
            "Actual Rows": 100,
            "Actual Loops": 1,
            "Output": [
              "l_orderkey",
              "l_partkey",
              "l_suppkey",
              "l_linenumber",
              "l_quantity",
              "l_extendedprice",
              "l_discount",
              "l_tax",
              "l_returnflag",
              "l_linestatus",
              "l_shipdate",
              "l_commitdate",
              "l_receiptdate",
              "l_shipinstruct",
              "l_shipmode",
              "l_comment"
            ],
            "Workers Planned": 2,
            "Workers Launched": 2,
            "Shared Hit Blocks": 1938,
            "Shared Read Blocks": 110679,
            "Shared Dirtied Blocks": 0,
            "Shared Written Blocks": 0,
            "Local Hit Blocks": 0,
            "Local Read Blocks": 0,
            "Local Dirtied Blocks": 0,
            "Local Written Blocks": 0,
            "Temp Read Blocks": 0,
            "Temp Written Blocks": 0,
            "Plans": [
              {
                "Node Type": "Sort",
                "Parent Relationship": "Outer",
                "Parallel Aware": false,
                "Async Capable": false,
                "Startup Cost": 233076.04,
                "Total Cost": 239327.32,
                "Plan Rows": 2500515,
                "Plan Width": 117,
                "Actual Startup Time": 518.034,
                "Actual Total Time": 518.04,
                "Actual Rows": 77,
                "Actual Loops": 3,
                "Output": [
                  "l_orderkey",
                  "l_partkey",
                  "l_suppkey",
                  "l_linenumber",
                  "l_quantity",
                  "l_extendedprice",
                  "l_discount",
                  "l_tax",
                  "l_returnflag",
                  "l_linestatus",
                  "l_shipdate",
                  "l_commitdate",
                  "l_receiptdate",
                  "l_shipinstruct",
                  "l_shipmode",
                  "l_comment"
                ],
                "Sort Key": [
                  "lineitem.l_comment"
                ],
                "Sort Method": "top-N heapsort",
                "Sort Space Used": 62,
                "Sort Space Type": "Memory",
                "Shared Hit Blocks": 1938,
                "Shared Read Blocks": 110679,
                "Shared Dirtied Blocks": 0,
                "Shared Written Blocks": 0,
                "Local Hit Blocks": 0,
                "Local Read Blocks": 0,
                "Local Dirtied Blocks": 0,
                "Local Written Blocks": 0,
                "Temp Read Blocks": 0,
                "Temp Written Blocks": 0,
                "Workers": [
                  {
                    "Worker Number": 0,
                    "Actual Startup Time": 505.97,
                    "Actual Total Time": 505.979,
                    "Actual Rows": 100,
                    "Actual Loops": 1,
                    "Sort Method": "top-N heapsort",
                    "Sort Space Used": 65,
                    "Sort Space Type": "Memory",
                    "Shared Hit Blocks": 635,
                    "Shared Read Blocks": 34754,
                    "Shared Dirtied Blocks": 0,
                    "Shared Written Blocks": 0,
                    "Local Hit Blocks": 0,
                    "Local Read Blocks": 0,
                    "Local Dirtied Blocks": 0,
                    "Local Written Blocks": 0,
                    "Temp Read Blocks": 0,
                    "Temp Written Blocks": 0
                  },
                  {
                    "Worker Number": 1,
                    "Actual Startup Time": 509.428,
                    "Actual Total Time": 509.434,
                    "Actual Rows": 100,
                    "Actual Loops": 1,
                    "Sort Method": "top-N heapsort",
                    "Sort Space Used": 63,
                    "Sort Space Type": "Memory",
                    "Shared Hit Blocks": 677,
                    "Shared Read Blocks": 36240,
                    "Shared Dirtied Blocks": 0,
                    "Shared Written Blocks": 0,
                    "Local Hit Blocks": 0,
                    "Local Read Blocks": 0,
                    "Local Dirtied Blocks": 0,
                    "Local Written Blocks": 0,
                    "Temp Read Blocks": 0,
                    "Temp Written Blocks": 0
                  }
                ],
                "Plans": [
                  {
                    "Node Type": "Seq Scan",
                    "Parent Relationship": "Outer",
                    "Parallel Aware": true,
                    "Async Capable": false,
                    "Relation Name": "lineitem",
                    "Schema": "public",
                    "Alias": "lineitem",
                    "Startup Cost": 0.0,
                    "Total Cost": 137508.15,
                    "Plan Rows": 2500515,
                    "Plan Width": 117,
                    "Actual Startup Time": 1.063,
                    "Actual Total Time": 217.989,
                    "Actual Rows": 2000405,
                    "Actual Loops": 3,
                    "Output": [
                      "l_orderkey",
                      "l_partkey",
                      "l_suppkey",
                      "l_linenumber",
                      "l_quantity",
                      "l_extendedprice",
                      "l_discount",
                      "l_tax",
                      "l_returnflag",
                      "l_linestatus",
                      "l_shipdate",
                      "l_commitdate",
                      "l_receiptdate",
                      "l_shipinstruct",
                      "l_shipmode",
                      "l_comment"
                    ],
                    "Shared Hit Blocks": 1824,
                    "Shared Read Blocks": 110679,
                    "Shared Dirtied Blocks": 0,
                    "Shared Written Blocks": 0,
                    "Local Hit Blocks": 0,
                    "Local Read Blocks": 0,
                    "Local Dirtied Blocks": 0,
                    "Local Written Blocks": 0,
                    "Temp Read Blocks": 0,
                    "Temp Written Blocks": 0,
                    "Workers": [
                      {
                        "Worker Number": 0,
                        "Actual Startup Time": 1.161,
                        "Actual Total Time": 220.213,
                        "Actual Rows": 1884661,
                        "Actual Loops": 1,
                        "Shared Hit Blocks": 578,
                        "Shared Read Blocks": 34754,
                        "Shared Dirtied Blocks": 0,
                        "Shared Written Blocks": 0,
                        "Local Hit Blocks": 0,
                        "Local Read Blocks": 0,
                        "Local Dirtied Blocks": 0,
                        "Local Written Blocks": 0,
                        "Temp Read Blocks": 0,
                        "Temp Written Blocks": 0
                      },
                      {
                        "Worker Number": 1,
                        "Actual Startup Time": 1.925,
                        "Actual Total Time": 212.849,
                        "Actual Rows": 1966191,
                        "Actual Loops": 1,
                        "Shared Hit Blocks": 620,
                        "Shared Read Blocks": 36240,
                        "Shared Dirtied Blocks": 0,
                        "Shared Written Blocks": 0,
                        "Local Hit Blocks": 0,
                        "Local Read Blocks": 0,
                        "Local Dirtied Blocks": 0,
                        "Local Written Blocks": 0,
                        "Temp Read Blocks": 0,
                        "Temp Written Blocks": 0
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "Planning": {
        "Shared Hit Blocks": 79,
        "Shared Read Blocks": 0,
        "Shared Dirtied Blocks": 0,
        "Shared Written Blocks": 0,
        "Local Hit Blocks": 0,
        "Local Read Blocks": 0,
        "Local Dirtied Blocks": 0,
        "Local Written Blocks": 0,
        "Temp Read Blocks": 0,
        "Temp Written Blocks": 0
      },
      "Planning Time": 1.592,
      "Triggers": [],
      "Execution Time": 542.055
    }
  ],
  "hypopg_proof": null
}